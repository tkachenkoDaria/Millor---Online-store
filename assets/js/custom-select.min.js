(()=>{"use strict";(class{static EL="itc-select";static EL_SHOW="itc-select_show";static EL_OPTION="itc-select__option";static EL_OPTION_SELECTED="itc-select__option_selected";static DATA="[data-select]";static DATA_TOGGLE='[data-select="toggle"]';static template(t){const{name:e,options:s,targetValue:i}=t,c=[];let l=-1,o="",n="Выберите из списка";return s.forEach(((t,e)=>{let s="";t[0]===i&&(s=` ${this.EL_OPTION_SELECTED}`,l=e,o=t[0],n=t[1]),c.push(`<li class="itc-select__option${s}" data-select="option"\n          data-value="${t[0]}" data-index="${e}">${t[1]}</li>`)})),`<button type="button" class="itc-select__toggle" name="${e}"\n        value="${o}" data-select="toggle" data-index="${l}">\n        ${n}</button><div class="itc-select__dropdown">\n        <ul class="itc-select__options">${c.join("")}</ul></div>`}static hideOpenSelect(){document.addEventListener("click",(t=>{t.target.closest(`.${this.EL}`)||document.querySelectorAll(`.${this.EL_SHOW}`).forEach((t=>{t.classList.remove(this.EL_SHOW)}))}))}static create(t,e){return this._el="string"==typeof t?document.querySelector(t):t,this._el?new this(t,e):null}constructor(t,e){this._el="string"==typeof t?document.querySelector(t):t,this._params=e||{},this._onClickFn=this._onClick.bind(this),this._params.options&&(this._el.innerHTML=this.constructor.template(this._params),this._el.classList.add(this.constructor.EL)),this._elToggle=this._el.querySelector(this.constructor.DATA_TOGGLE),this._el.addEventListener("click",this._onClickFn)}_onClick(t){const{target:e}=t,s=e.closest(this.constructor.DATA).dataset.select;"toggle"===s?this.toggle():"option"===s&&this._changeValue(e)}_updateOption(t){const e=t.closest(`.${this.constructor.EL_OPTION}`),s=this._el.querySelector(`.${this.constructor.EL_OPTION_SELECTED}`);return s&&s.classList.remove(this.constructor.EL_OPTION_SELECTED),e.classList.add(this.constructor.EL_OPTION_SELECTED),this._elToggle.textContent=e.textContent,this._elToggle.value=e.dataset.value,this._elToggle.dataset.index=e.dataset.index,this._el.dispatchEvent(new CustomEvent("itc.select.change")),this._params.onSelected&&this._params.onSelected(this,e),e.dataset.value}_reset(){const t=this._el.querySelector(`.${this.constructor.EL_OPTION_SELECTED}`);return t&&t.classList.remove(this.constructor.EL_OPTION_SELECTED),this._elToggle.textContent="Выберите из списка",this._elToggle.value="",this._elToggle.dataset.index="-1",this._el.dispatchEvent(new CustomEvent("itc.select.change")),this._params.onSelected&&this._params.onSelected(this,null),""}_changeValue(t){t.classList.contains(this.constructor.EL_OPTION_SELECTED)||(this._updateOption(t),this.hide())}show(){document.querySelectorAll(this.constructor.EL_SHOW).forEach((t=>{t.classList.remove(this.constructor.EL_SHOW)})),this._el.classList.add(`${this.constructor.EL_SHOW}`)}hide(){this._el.classList.remove(this.constructor.EL_SHOW)}toggle(){this._el.classList.contains(this.constructor.EL_SHOW)?this.hide():this.show()}dispose(){this._el.removeEventListener("click",this._onClickFn)}get value(){return this._elToggle.value}set value(t){let e=!1;this._el.querySelectorAll(".select__option").forEach((s=>{s.dataset.value===t&&(e=!0,this._updateOption(s))})),e||this._reset()}get selectedIndex(){return this._elToggle.dataset.index}set selectedIndex(t){const e=this._el.querySelector(`.select__option[data-index="${t}"]`);e&&this._updateOption(e),this._reset()}}).hideOpenSelect()})();